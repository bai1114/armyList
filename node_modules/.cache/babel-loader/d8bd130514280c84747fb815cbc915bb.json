{"ast":null,"code":"import _objectSpread from \"/Users/Flora/myapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/Users/Flora/myapp/src/components/CreateSoldier/index.js\";\nimport React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom'; // import './index.css';\n\nimport face from '../../image/default.png';\n\nclass CreateSoldier extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      let imgUrl = '';\n      console.log('uploadsuccess', this.props.image.uploadSuccess);\n      console.log('upload image url:', this.props.image.imgUrl);\n\n      if (this.props.image.uploadSuccess) {\n        imgUrl = this.props.image.imgUrl;\n        console.log('Testing imgUrl', imgUrl);\n        this.setState({\n          imgUrl: this.props.image.imgUrl\n        });\n\n        const soldier = _objectSpread({}, this.state, {\n          imgUrl\n        });\n\n        delete soldier.startDateStr;\n        this.props.createSoldier(soldier);\n\n        if (this.props.err === null) {\n          this.setState({\n            redirect: true,\n            imgUrl: this.props.image.imgUrl\n          });\n        }\n      } else {\n        const soldier = _objectSpread({}, this.state, {\n          imgUrl\n        });\n\n        delete soldier.startDateStr;\n        this.props.createSoldier(soldier);\n\n        if (this.props.isLoading === false && this.props.err === null) {\n          this.setState({\n            redirect: true\n          });\n        }\n      }\n\n      console.log('after submit imgurl', imgUrl);\n    };\n\n    this.handleChange = (e, key) => {\n      let newObj = {};\n      newObj[key] = e.target.value;\n      this.setState(newObj);\n    };\n\n    this.handleDateChange = e => {\n      const dateStr = e.target.value;\n      let date = e.target.value;\n      this.setState({\n        startDateStr: dateStr,\n        startDate: date\n      });\n      this.setState({\n        startDate: date\n      });\n    };\n\n    this.handleFile = () => {\n      const file = this.fileInput.files[0];\n      const filename = file.name;\n      const url = this.getObjectURL(file);\n      this.setState({\n        imgUrl: url\n      });\n      this.props.uploadImage(file, filename);\n    };\n\n    this.state = {\n      name: '',\n      sex: '',\n      rank: '',\n      startDate: null,\n      startDateStr: '',\n      phone: '',\n      email: '',\n      superiorId: null,\n      redirect: false,\n      imgUrl: face\n    };\n  }\n\n  getObjectURL(file) {\n    var url = null;\n\n    if (window.createObjectURL !== undefined) {\n      // basic\n      url = window.createObjectURL(file);\n    } else if (window.URL !== undefined) {\n      // mozilla(firefox)\n      url = window.URL.createObjectURL(file);\n    } else if (window.webkitURL !== undefined) {\n      // webkit or chrome\n      url = window.webkitURL.createObjectURL(file);\n    }\n\n    console.log('getobjectURL', url);\n    return url;\n  }\n\n  render() {\n    const redirect = this.state.redirect;\n    const imgStyle = {\n      width: \"200px\",\n      height: \"200px\"\n    };\n    console.log(\"redirect\", redirect);\n\n    if (redirect && !this.props.isLoading) {\n      return React.createElement(Redirect, {\n        to: {\n          pathname: '/'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      });\n    } else {\n      return React.createElement(\"div\", {\n        className: \"create_soldier\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, \"Create New Soldier\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }), React.createElement(\"form\", {\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"image\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: this.state.imgUrl,\n        alt: \"\",\n        style: imgStyle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        htmlFor: \"picture\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"form-group col-md-50\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, \"Upload Picture:\", React.createElement(\"input\", {\n        id: \"picture\",\n        type: \"file\",\n        ref: input => {\n          this.fileInput = input;\n        },\n        className: \"form-control\",\n        accept: \".jpg, .jpeg, .png\",\n        onChange: this.handleFile,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        class: \"form-group col-md-50\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, \"Name:\"), React.createElement(\"input\", {\n        type: \"text\",\n        class: \"form-control\",\n        id: \"name\",\n        value: this.state.name,\n        onChange: e => this.handleChange(e, 'name'),\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        class: \"form-group col-md-50\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"sex\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, \"Sex:\"), React.createElement(\"input\", {\n        type: \"text\",\n        class: \"form-control\",\n        id: \"sex\",\n        value: this.state.sex,\n        onChange: e => this.handleChange(e, 'sex'),\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        class: \"form-group col-md-50\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"rank\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, \"Rank:\"), React.createElement(\"input\", {\n        type: \"text\",\n        class: \"form-control\",\n        id: \"rank\",\n        value: this.state.rank,\n        onChange: e => this.handleChange(e, 'rank'),\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        class: \"form-group col-md-50\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"startDate\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, \"Start Date:\"), React.createElement(\"input\", {\n        type: \"date\",\n        class: \"form-control\",\n        id: \"startDate\",\n        value: this.state.startDateStr,\n        onChange: this.handleDateChange,\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        class: \"form-group col-md-50\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"phone\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, \"Phone:\"), React.createElement(\"input\", {\n        type: \"number\",\n        class: \"form-control\",\n        id: \"phone\",\n        value: this.state.phone,\n        onChange: e => this.handleChange(e, 'phone'),\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        class: \"form-group col-md-50\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"email\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, \"Email:\"), React.createElement(\"input\", {\n        type: \"text\",\n        class: \"form-control\",\n        id: \"email\",\n        value: this.state.email,\n        onChange: e => this.handleChange(e, 'email'),\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        class: \"form-group col-md-50\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        className: \"col col-sm-2 col-lg-2 col-form-label\",\n        htmlFor: \"superior\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, \"Superior:\"), React.createElement(\"div\", {\n        className: \"col col-sm-10 col-lg-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, React.createElement(\"select\", {\n        className: \"form-control\",\n        id: \"superior\",\n        onChange: e => this.handleChange(e, 'superiorId'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: null,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, \" Select a soldier as a superior \"), this.props.soldiers.map(soldier => {\n        return React.createElement(\"option\", {\n          key: soldier._id,\n          value: soldier._id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 161\n          },\n          __self: this\n        }, soldier.name);\n      })))), React.createElement(\"button\", {\n        className: \"btn btn-success\",\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, \"Save Soldier\")));\n    }\n  }\n\n}\n\nexport default CreateSoldier;","map":{"version":3,"sources":["/Users/Flora/myapp/src/components/CreateSoldier/index.js"],"names":["React","Component","Redirect","face","CreateSoldier","constructor","props","handleSubmit","e","preventDefault","imgUrl","console","log","image","uploadSuccess","setState","soldier","state","startDateStr","createSoldier","err","redirect","isLoading","handleChange","key","newObj","target","value","handleDateChange","dateStr","date","startDate","handleFile","file","fileInput","files","filename","name","url","getObjectURL","uploadImage","sex","rank","phone","email","superiorId","window","createObjectURL","undefined","URL","webkitURL","render","imgStyle","width","height","pathname","input","soldiers","map","_id"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\n// import './index.css';\nimport face from '../../image/default.png';\n\nclass CreateSoldier extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: '',\n      sex: '',\n      rank: '',\n      startDate: null,\n      startDateStr: '',\n      phone: '',\n      email: '',\n      superiorId: null,\n      redirect: false,\n      imgUrl: face,\n    };\n  }\n\n\n  handleSubmit = e => {\n    e.preventDefault();\n    let imgUrl = '';\n    console.log('uploadsuccess',this.props.image.uploadSuccess);\n    console.log('upload image url:', this.props.image.imgUrl);\n    if (this.props.image.uploadSuccess) {\n      imgUrl = this.props.image.imgUrl;\n      console.log('Testing imgUrl', imgUrl);\n      this.setState({ imgUrl: this.props.image.imgUrl });\n      const soldier = {...this.state, imgUrl };\n      delete soldier.startDateStr;\n      this.props.createSoldier(soldier);\n      if (this.props.err === null) {\n        this.setState({ redirect: true, imgUrl: this.props.image.imgUrl });\n      }\n      \n    } else {\n      const soldier = {...this.state, imgUrl };\n      delete soldier.startDateStr;\n      this.props.createSoldier(soldier);\n      if (this.props.isLoading === false && this.props.err === null ) {\n        this.setState({ redirect: true });\n      }\n    }\n    console.log('after submit imgurl', imgUrl);\n  }\n  \n  handleChange = (e, key) => {\n    let newObj = {};\n    newObj[key] = e.target.value;\n    this.setState(newObj);\n  }\n\n  handleDateChange = e => {\n    const dateStr = e.target.value;\n    let date = e.target.value;\n    this.setState({ startDateStr: dateStr, startDate: date });\n    this.setState({ startDate: date });\n  }\n\n  handleFile = () => {\n    const file = this.fileInput.files[0];\n    const filename = file.name;\n    const url = this.getObjectURL(file);\n    this.setState({imgUrl : url});\n    this.props.uploadImage(file, filename);\n  };\n  getObjectURL(file) {\n    var url = null ;\n    if (window.createObjectURL!==undefined) { // basic\n        url = window.createObjectURL(file) ;\n    } else if (window.URL!==undefined) { // mozilla(firefox)\n        url = window.URL.createObjectURL(file) ;\n    } else if (window.webkitURL!==undefined) { // webkit or chrome\n        url = window.webkitURL.createObjectURL(file) ;\n    }\n    console.log('getobjectURL', url);\n    return url ;\n  }\n\n  render() {\n    const redirect = this.state.redirect;\n    const imgStyle  = {width : \"200px\", height : \"200px\"}\n    console.log(\"redirect\", redirect);\n    if (redirect && !this.props.isLoading) {\n      return <Redirect to = {{ pathname: '/' }}/>\n    } else {\n      return (\n        <div className = 'create_soldier'>\n          <h2>Create New Soldier</h2>\n          <br></br>\n          <form onSubmit = {this.handleSubmit}>\n            <div className=\"image\">\n            <img src={this.state.imgUrl} alt=\"\" style={imgStyle}></img>\n              <label htmlFor=\"picture\"> \n              </label>\n              <div className=\"form-group col-md-50\">\n              Upload Picture:\n                <input id=\"picture\" type=\"file\" \n                       ref = {input => {this.fileInput = input}}\n                       className=\"form-control\"\n                       accept=\".jpg, .jpeg, .png\"\n                       onChange={this.handleFile}\n                />\n              </div>\n            </div>\n\n            <div class=\"form-group col-md-50\"> \n              <label htmlFor=\"name\">\n                Name:\n              </label>\n              <input type = 'text' class=\"form-control\" id = 'name' value = {this.state.name} onChange = {e => this.handleChange(e, 'name')} required = {true} />\n            </div>\n\n            <div class=\"form-group col-md-50\"> \n              <label htmlFor=\"sex\">\n                Sex:\n              </label>\n              <input type = 'text' class=\"form-control\" id = 'sex' value = {this.state.sex} onChange = {e => this.handleChange(e, 'sex')} required = {true} />\n            </div>\n            \n            <div class=\"form-group col-md-50\"> \n              <label  htmlFor=\"rank\">\n                Rank:\n              </label>\n              <input type = 'text' class=\"form-control\" id = 'rank' value = {this.state.rank} onChange = {e => this.handleChange(e, 'rank')} required = {true}/>\n            </div>\n              \n            <div class=\"form-group col-md-50\"> \n              <label htmlFor=\"startDate\">\n                Start Date:\n              </label>\n              <input type = 'date' class=\"form-control\" id = 'startDate' value = {this.state.startDateStr} onChange = {this.handleDateChange} required = {true}/>\n            </div>\n            \n            <div class=\"form-group col-md-50\"> \n              <label htmlFor=\"phone\">\n                Phone:\n              </label>\n              <input type = 'number' class=\"form-control\" id = 'phone' value = {this.state.phone} onChange = {e => this.handleChange(e, 'phone')} required = {true} />\n            </div>\n              \n            <div class=\"form-group col-md-50\"> \n              <label htmlFor='email'>\n                Email: \n              </label> \n              <input type = 'text' class=\"form-control\" id = 'email' value = {this.state.email} onChange = {e => this.handleChange(e, 'email')} required = {true} />\n            </div> \n\n            <div class=\"form-group col-md-50\"> \n              <label className=\"col col-sm-2 col-lg-2 col-form-label\" htmlFor='superior'>\n                Superior: \n              </label> \n              <div className=\"col col-sm-10 col-lg-4\">\n              <select className=\"form-control\" id=\"superior\" onChange={e => this.handleChange(e, 'superiorId')}>\n                <option value={null}> Select a soldier as a superior </option>\n                {this.props.soldiers.map(soldier => {\n                  return <option key={soldier._id} value={soldier._id}>{soldier.name}</option>\n                })}\n              </select>\n            </div>\n            </div> \n\n            <button className=\"btn btn-success\" type = \"submit\">Save Soldier</button> \n          </form>\n        </div>\n      );\n    } \n  }\n}\n\nexport default CreateSoldier;"]},"metadata":{},"sourceType":"module"}