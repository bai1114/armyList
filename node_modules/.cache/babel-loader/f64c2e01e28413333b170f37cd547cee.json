{"ast":null,"code":"var _jsxFileName = \"/Users/Flora/myapp/src/containers/Pagination/index.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { fetchPage, getCount, setStatusCurPage, resetRedirect } from '../../redux/action-creators';\n\nclass Pagination extends Component {\n  constructor(props) {\n    super(props); // const pageSize = this.props.pageSize;\n    // const count = this.props.count;\n    // const numberList = [];\n    // const totalPages = Math.ceil(count / pageSize);\n    // let startPage = 1, endPage = totalPages;\n    // console.log('setcurpage count is', count);\n    // for (let i = startPage; i <= endPage; i++) {\n    //   numberList.push(i);\n    //   console.log('already pushed', numberList);\n    // }\n\n    this.setCurPage = curPage => {\n      this.props.getCount();\n      this.props.fetchPage(curPage, 5);\n      const pageSize = this.props.pageSize;\n      const count = this.props.count; //const pageNumber = this.props.pageNumber;\n\n      const pageNums = [];\n      const totalPages = Math.ceil(count / pageSize);\n      let startPage = 1,\n          endPage = totalPages;\n      console.log('setcurpage count is', count);\n\n      for (let i = startPage; i <= endPage; i++) {\n        pageNums.push(i);\n        console.log('set curpage already pushed', pageNums);\n      }\n\n      this.setState({\n        pageNums\n      });\n    };\n\n    this.state = {\n      //pageNumber: \n      pageNums: []\n    };\n  } // componentDidMount() {\n  //   this.props.getCount();\n  //   //this.setCurPage(1);\n  //   //this.props.resetRedirect();\n  // }\n  //一会加上\n\n\n  componentDidUpdate(prevProps) {\n    if (this.props.count !== prevProps.count) {\n      this.setCurPage(this.props.status.curPage);\n      console.log('componentDidUpdate prevpros count', prevProps.count);\n    } //console.log('componentDidUpdate count', this.props.count);\n\n  }\n\n  render() {\n    // const pageProp = this.props.page;\n    // const pageNumber = this.state.pageNumber;\n    // const { count } = pageProp.count;\n    // const { pageSize } = pageProp.pageSize;\n    // const totalPages = Math.ceil(count / pageSize);\n    //const pageNumber = this.props.pageNumber;\n    const pageNums = this.state.pageNums;\n    const count = this.props.count;\n    const pageSize = this.props.pageSize;\n    const totalPages = Math.ceil(count / pageSize);\n    console.log('totalpage is ', totalPages);\n    console.log('~Testing count is~~ ', count);\n    console.log('~Testing pageNumber is~~ ', pageNumber);\n    console.log('~Testing pageSize is~~ ', pageSize);\n    return (// <ul className=\"pagination\">\n      //   <li className=\"page-item\">\n      //     {this.props.curPage === 1 ? '' : <a className=\"page-link\" onClick={() => this.setCurPage(this.props.curPage - 1)} >Previous</a>}\n      //   </li>\n      // {pageNumber.map(page => {\n      //   return (\n      //     <li key={page} className=\"page-item\">\n      //       <a onClick={() => this.setCurPage(page)} className=\"page-link\">{page}</a>\n      //     </li>\n      //   );\n      // })}\n      //   <li className=\"page-item\">\n      //     {this.props.curPage === totalPages ? '' : <a onClick={() => this.setCurPage(this.props.curPage + 1)} className=\"page-link\" >Next</a>}\n      //   </li>\n      // </ul>\n      React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, this.props.curPage === 1 ? '' : React.createElement(\"button\", {\n        className: \"page-link\",\n        onClick: () => this.setCurPage(this.props.curPage - 1),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, \"Previous\")), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, pageNums.map(page => {\n        return React.createElement(\"div\", {\n          key: page,\n          className: \"page-item\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          onClick: () => this.setCurPage(page),\n          className: \"page-link\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100\n          },\n          __self: this\n        }, page));\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, this.props.curPage === totalPages ? '' : React.createElement(\"button\", {\n        onClick: () => this.setCurPage(this.props.curPage + 1),\n        className: \"page-link\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, \"Next\")))\n    );\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    status: state.status,\n    pageOfUsers: state.getUsers.pageOfUsers,\n    curPage: state.getUsers.curPage,\n    pageSize: state.getUsers.pageSize,\n    count: state.getUsers.count,\n    pageNumber: state.getUsers.pageNumber\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    resetRedirect: () => {\n      dispatch(resetRedirect());\n    },\n    fetchPage: (page, size) => {\n      dispatch(fetchPage(page, size));\n    },\n    setStatusCurPage: page => {\n      dispatch(setStatusCurPage(page));\n    },\n    getCount: () => {\n      dispatch(getCount());\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Pagination);","map":{"version":3,"sources":["/Users/Flora/myapp/src/containers/Pagination/index.js"],"names":["React","Component","connect","fetchPage","getCount","setStatusCurPage","resetRedirect","Pagination","constructor","props","setCurPage","curPage","pageSize","count","pageNums","totalPages","Math","ceil","startPage","endPage","console","log","i","push","setState","state","componentDidUpdate","prevProps","status","render","pageNumber","map","page","mapStateToProps","pageOfUsers","getUsers","mapDispatchToProps","dispatch","size"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { fetchPage, getCount, setStatusCurPage, resetRedirect } from '../../redux/action-creators';\n\nclass Pagination extends Component {\n  constructor(props) {\n    super(props);\n    // const pageSize = this.props.pageSize;\n    // const count = this.props.count;\n    // const numberList = [];\n  \n    // const totalPages = Math.ceil(count / pageSize);\n    // let startPage = 1, endPage = totalPages;\n    // console.log('setcurpage count is', count);\n    // for (let i = startPage; i <= endPage; i++) {\n    //   numberList.push(i);\n    //   console.log('already pushed', numberList);\n    // }\n    this.state = {\n      //pageNumber: \n      pageNums: []\n    };\n  }\n\n  // componentDidMount() {\n  //   this.props.getCount();\n  //   //this.setCurPage(1);\n  //   //this.props.resetRedirect();\n  // }\n\n  //一会加上\n  componentDidUpdate(prevProps) {\n    if (this.props.count !== prevProps.count) {\n      this.setCurPage(this.props.status.curPage);\n      console.log('componentDidUpdate prevpros count', prevProps.count);\n    }\n    //console.log('componentDidUpdate count', this.props.count);\n\n  }\n\n  setCurPage = curPage => {\n    this.props.getCount();\n    this.props.fetchPage(curPage, 5);\n    const pageSize = this.props.pageSize;\n    const count = this.props.count;\n    //const pageNumber = this.props.pageNumber;\n    const pageNums = [];\n\n    const totalPages = Math.ceil(count / pageSize);\n    let startPage = 1, endPage = totalPages;\n    console.log('setcurpage count is', count);\n    for (let i = startPage; i <= endPage; i++) {\n      pageNums.push(i);\n      console.log('set curpage already pushed', pageNums);\n    }\n    this.setState({ pageNums });\n  };\n\n\n\n  render() {\n    // const pageProp = this.props.page;\n    // const pageNumber = this.state.pageNumber;\n    // const { count } = pageProp.count;\n    // const { pageSize } = pageProp.pageSize;\n    // const totalPages = Math.ceil(count / pageSize);\n    //const pageNumber = this.props.pageNumber;\n    const pageNums = this.state.pageNums;\n    const count = this.props.count;\n    const pageSize = this.props.pageSize;\n    const totalPages = Math.ceil(count / pageSize);\n    console.log('totalpage is ', totalPages);\n    console.log('~Testing count is~~ ', count);\n    console.log('~Testing pageNumber is~~ ', pageNumber);\n    console.log('~Testing pageSize is~~ ', pageSize);\n    return (\n      // <ul className=\"pagination\">\n      //   <li className=\"page-item\">\n      //     {this.props.curPage === 1 ? '' : <a className=\"page-link\" onClick={() => this.setCurPage(this.props.curPage - 1)} >Previous</a>}\n      //   </li>\n        // {pageNumber.map(page => {\n        //   return (\n        //     <li key={page} className=\"page-item\">\n        //       <a onClick={() => this.setCurPage(page)} className=\"page-link\">{page}</a>\n        //     </li>\n        //   );\n        // })}\n      //   <li className=\"page-item\">\n      //     {this.props.curPage === totalPages ? '' : <a onClick={() => this.setCurPage(this.props.curPage + 1)} className=\"page-link\" >Next</a>}\n      //   </li>\n      // </ul>\n      <div>\n        <div>\n          {this.props.curPage === 1 ? '' : <button className=\"page-link\" onClick={() => this.setCurPage(this.props.curPage - 1)} >Previous</button>}\n        </div>\n        <div>\n          {pageNums.map(page => {\n            return (\n              <div key={page} className=\"page-item\">\n                <button onClick={() => this.setCurPage(page)} className=\"page-link\">{page}</button>\n              </div>\n            );\n          })}\n        </div>\n        <div>\n          {this.props.curPage === totalPages ? '' : <button onClick={() => this.setCurPage(this.props.curPage + 1)} className=\"page-link\" >Next</button>}\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    status: state.status,\n    pageOfUsers: state.getUsers.pageOfUsers,\n    curPage: state.getUsers.curPage,\n    pageSize: state.getUsers.pageSize,\n    count: state.getUsers.count,\n    pageNumber: state.getUsers.pageNumber\n  };\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    resetRedirect: () => {\n      dispatch(resetRedirect());\n    },\n    fetchPage: (page, size) => {\n      dispatch(fetchPage(page, size));\n    },\n    setStatusCurPage: (page) => {\n      dispatch(setStatusCurPage(page));\n    },\n    getCount: () => {\n      dispatch(getCount());\n    }\n  }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Pagination);"]},"metadata":{},"sourceType":"module"}